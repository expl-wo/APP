(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-main-main"],{"00e4":function(t,e,n){"use strict";n("7a82");var i=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.getCommonUrl=function(){return new Promise((function(t,e){(0,s.default)({url:"/endpoint/comm/reso/rooturl",method:"get"}).then((function(e){t(e)}))}))},e.getCommonUrlStore=function(){return uni.getStorageSync("CommonUrlStr")},e.setCommonUrlStore=function(t){return uni.setStorageSync("CommonUrlStr",t)},n("d3b7");var s=i(n("3d7c"))},"339e":function(t,e,n){var i=n("6ace");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=n("4f06").default;s("7395f7c9",i,!0,{sourceMap:!1,shadowMode:!1})},"6ace":function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,".app-containerR[data-v-27ed20f0]{padding-top:%?40?%;justify-content:center;align-items:center}.msg[data-v-27ed20f0]{position:absolute;color:#2979ff;right:%?15?%}.msg-size[data-v-27ed20f0]{width:%?20?%;height:%?20?%;line-height:%?20?%;background-color:red;border-radius:50%;text-align:center;position:absolute;right:%?18?%;top:%?3?%;z-index:2}.img-size[data-v-27ed20f0]{width:%?20?%;height:%?20?%;line-height:%?20?%;position:absolute;left:%?18?%;top:%?3?%;z-index:2}.app-containerR>.my-item[data-v-27ed20f0]{width:%?150?%;height:%?240?%;display:flex;margin-top:%?15?%;flex-direction:column;align-items:center;justify-content:center}.my-item>.group-title[data-v-27ed20f0]{font-size:%?25?%!important}",""]),t.exports=e},"9d56":function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}));var i={uIcon:n("3c3f").default,uPopup:n("e6ab").default},s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"content "},[i("v-uni-view",{},[i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.showList[4],expression:"showList[4]"}]},[i("v-uni-image",{staticClass:"img-size",attrs:{src:n("d04a"),mode:""},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.scanButtonClick.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticClass:"msg-size"},[t._v(t._s(t.msgSize))]),i("u-icon",{staticClass:"text-xl msg",attrs:{size:"50",name:"bell-fill"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.tapMsg.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticClass:"app-containerR app-containerWrap"},[i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.showList[1],expression:"showList[1]"}],staticClass:"group-warter my-item w-240 tc bg-cyan",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.jumpTap1()}}},[i("u-icon",{attrs:{size:"80",name:"../../static/img/icon/shengChan.svg"}}),i("v-uni-view",{staticClass:"group-title"},[t._v("生产管理")])],1),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.showList[0],expression:"showList[0]"}],staticClass:"group-warter my-item w-240 tc bg-blue",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.jumpTap2()}}},[i("u-icon",{staticClass:"text-xl",attrs:{size:"80",name:"../../static/img/icon/pm_001.svg"}}),i("v-uni-view",{staticClass:"group-title"},[t._v("Andon管理")])],1),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.showList[2],expression:"showList[2]"}],staticClass:"group-warter w-240 my-item tc bg-purple",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.jumpTap3()}}},[i("u-icon",{staticClass:"text-xl",attrs:{size:"80",name:"../../static/img/icon/sheBei.svg"}}),i("v-uni-view",{staticClass:"group-title"},[t._v("设备管理")])],1),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.showList[3],expression:"showList[3]"}],staticClass:"group-warter w-240 tc my-item bg-mauve",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.jumpTap4()}}},[i("u-icon",{staticClass:"text-xl s",attrs:{size:"80",name:"../../static/img/icon/zhiLiang.svg"}}),i("v-uni-view",{staticClass:"group-title"},[t._v("质量管理")])],1)],1),i("u-popup",{attrs:{mode:"top",show:t.scanShow},on:{close:function(e){arguments[0]=e=t.$handleEvent(e),t.scanShow=!1}}},[i("v-uni-view",{staticClass:"app-containerC wp table-zdy"},[i("v-uni-view",{staticClass:"th-group"},[i("v-uni-view",{staticClass:"th"},[t._v("请点击屏幕上绿色按钮进行扫码操作")])],1),i("v-uni-view",{staticClass:"td-group"},[i("v-uni-view",{staticClass:"td"},[i("v-uni-input",{staticClass:"uni-input",attrs:{type:"text",focus:t.focus},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.focus=!1},input:function(e){arguments[0]=e=t.$handleEvent(e),t.scanNext.apply(void 0,arguments)}},model:{value:t.scanId,callback:function(e){t.scanId=e},expression:"scanId"}})],1)],1)],1)],1)],1)},o=[]},c3a0:function(t,e,n){"use strict";n.r(e);var i=n("9d56"),s=n("f6cd");for(var o in s)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return s[t]}))}(o);n("d34b");var a=n("f0c5"),c=Object(a["a"])(s["default"],i["b"],i["c"],!1,null,"27ed20f0",null,!1,i["a"],void 0);e["default"]=c.exports},d04a:function(t,e,n){t.exports=n.p+"static/img/sm.6176b853.svg"},d34b:function(t,e,n){"use strict";var i=n("339e"),s=n.n(i);s.a},d880:function(t,e,n){"use strict";n("7a82");var i=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("d3b7"),n("159b"),n("d81d");var s=i(n("c7eb")),o=i(n("1da1")),a=(n("00e4"),i(n("ba76"))),c=(n("26cb"),n("c7cc"),n("e237")),u=n("f244"),r=n("8e75"),l=n("f542"),d={data:function(){return{codeList:["0703_Andon","0702_production","0701_equipment","0704_quality","pad-saoMa1005"],showList:[!1,!1,!1,!1,!1],msgSize:0,timeoutObj:{},scanId:"",scanShow:!1,focus:!1,token:"",userId:""}},onReady:function(){this.token=(0,c.getToken)(),this.userId=(0,c.getUserInfo)().id,""==(0,c.getToken)()&&uni.reLaunch({url:"/pages/login/login"})},created:function(){},mounted:function(){console.log("进入了主菜单")},methods:{jumpTap1:function(){uni.navigateTo({url:"/pages/production/index"})},jumpTap2:function(){uni.navigateTo({url:"/pages/andon/index"})},jumpTap3:function(){uni.navigateTo({url:"/pages/equip/index"})},jumpTap4:function(){uni.navigateTo({url:"/pages/quality/index"})},tapMsg:function(){uni.navigateTo({url:"../user/message"})},tapScan:function(){uni.navigateTo({url:"../scan/scan"})},connectSocketInit:function(){var t=this,e=this;this.socketTask=uni.connectSocket({url:"ws://10.16.9.107:8880/endpoint/websocket/msgsvr/"+this.userId,success:function(t){console.log("websocket连接成功")},fail:function(){e.reset()}}),this.socketTask.onOpen((function(e){console.log("WebSocket连接正常打开中...！"),t.is_open_socket=!0,t.socketTask.send({data:'{"toUserId":"'+uni.getStorageSync("lgnId")+'"}',success:function(){return(0,o.default)((0,s.default)().mark((function t(){return(0,s.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log("消息发送成功");case 1:case"end":return t.stop()}}),t)})))()}}),t.socketTask.onMessage((function(e){console.log("收到服务器内容："+e.data),t.msgSize=JSON.parse(e.data).size}))})),this.socketTask.onClose((function(){console.log("已经被关闭了")}))},closeSocket:function(){this.socketTask.close({success:function(t){this.is_open_socket=!1,console.log("关闭成功",t)},fail:function(t){console.log("关闭失败",t)}})},reset:function(){clearInterval(this.timeoutObj),this.start()},start:function(){var t=this;this.timeoutObj=setInterval((function(){t.connectSocketInit()}),1e4)},clickRequest:function(){this.is_open_socket&&this.socketTask.send({data:"请求一次发送一次message",success:function(){return(0,o.default)((0,s.default)().mark((function t(){return(0,s.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log("消息发送成功");case 1:case"end":return t.stop()}}),t)})))()}})},scanButtonClick:function(){var t=this;this.scanShow=!0,setTimeout((function(){t.focus=!0}),300)},scanNext:function(t){console.log(t.target.value),this.scanId=t.target.value,this.scanShow=!1,getApp().queryNo=t.target.value,setTimeout((function(){uni.navigateTo({url:"/pages/production/opTask/index"})}),300),this.scanId=""}},onShow:function(){var t=this;(0,r.currperm)().then((function(e){getApp().globalData.padGL=[],t.codeList=["0703_Andon","0702_production","0701_equipment","0704_quality","pad-saoMa1005"],e.data.forEach((function(e){"07_padGL"==e.code&&((0,u.savePermission)(e.sub),t.showList=t.codeList.map((function(t){return(0,u.hasPrivilege)(t)})))})),0==(0,l.getAppMenu)().length&&uni.showToast({title:"当前角色没有权限",icon:"none",duration:2e3})})),console.log("进入了主菜单2"),(0,r.lineWorkSpace)().then((function(t){if(1e4==t.err_code){var e=t.data.instances,n=t.data.sub;null!=e&&void 0!=e&&e.length>0?uni.setStorageSync("workSpace",e[0].typeName):null!=n&&void 0!=n&&n.length>0&&uni.setStorageSync("workSpace",n[0].name)}}))},onLoad:function(t){var e=this;return(0,o.default)((0,s.default)().mark((function t(){return(0,s.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:a.default.startUpgradeApp(),e.connectSocketInit();case 2:case"end":return t.stop()}}),t)})))()}};e.default=d},f6cd:function(t,e,n){"use strict";n.r(e);var i=n("d880"),s=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=s.a}}]);